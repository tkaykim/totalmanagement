2. 프론트엔드 구성 (구조 및 컴포넌트)사업부별 차이점은 설정(Config) 파일로 관리하고, 컴포넌트는 공통으로 사용합니다.2.1. 페이지 구성 (Sitemap)Dashboard:공통: 나의 할 일(My Tasks), 알림 센터(권한 승인 등).Admin/Manager: 전사/부서별 이번 달 매출/지출 요약 차트.Projects:List: 탭 구분 (전체 / 내 부서 / 내가 참여한 타 부서).Detail:Overview: 기본 정보, 진행률.Tasks: 칸반 보드 or 리스트 (할 일 관리).Members: 참여자 관리 (외부 인원 포함).Finance: (권한 제어됨) 해당 프로젝트의 예산 및 집행 내역.Finance (전사 재무):Admin: 전체 열람.Member: created_by가 본인인 항목만 열람 가능. (필요 시 권한 요청 버튼 노출)2.2. 핵심 모달 & 컴포넌트A. [Modal] 프로젝트 생성 (사업부별 분기 처리)Logic: 로그인한 유저의 bu_code를 감지합니다.GRIGO: "공연 일자", "큐시트 첨부" 필드 우선 노출.REACT: "채널명", "업로드 예정일" 필드 우선 노출.나머지는 공통 필드(제목, 기간, 예산) 사용.B. [Modal] 재무 등록 (Smart Calculator) [★중요]입력 필드에 따라 자동 계산되는 계산기 로직이 내장되어야 합니다.선택 항목 (과세 유형)입력 시나리오자동 계산 로직 (프론트 표시)과세 (VAT)공급가 100만 입력세액 10만, 합계 110만 자동 입력면세 (FREE)공급가 100만 입력세액 0원, 합계 100만 자동 입력원천징수 (3.3%)지급총액 100만 입력공급가 100만, 세액 -33,000원, 실지급 967,000원UI 구성:Type Select: 매출 / 지출Tax Select: 과세 / 면세 / 3.3%Target: 거래처 / 아티스트 / 직원 선택 (Smart Picker)Amount: 금액 입력 시 하단에 "실제 나가는 돈: OOO원" 문구 실시간 표시.C. [Component] 권한 마스킹 (SecureGuard)재무 테이블에서 권한이 없는 Member가 조회 시:상세 금액: ***,*** 처리.클릭 시: "상세 정보를 보려면 [권한 신청] 하세요" 팝업.3. 백엔드 API 정의 및 작동 방식Supabase의 Edge Function 또는 Next.js API Routes를 기준으로 설명합니다.3.1. 프로젝트 조회 API (GET /api/projects)"타 부서 프로젝트 열람" 로직을 처리합니다.Request: user_id, user_bu, user_roleQuery Logic (SQL Condition):SQLWHERE 
  (projects.bu_code = :user_bu) -- 1. 내 부서 프로젝트거나
  OR (projects.pm_id = :user_id) -- 2. 내가 PM이거나
  OR (projects.participants @> '[{"id": :user_id}]') -- 3. 참여자에 내가 있거나
  OR (EXISTS (SELECT 1 FROM project_tasks WHERE project_id = projects.id AND assignee_id = :user_id)) -- 4. 내 할 일이 있거나
  OR (:user_role IN ('ADMIN')) -- 5. 관리자거나
3.2. 재무 등록/수정 API (POST /api/finance)**"세금 무결성 검증"**을 수행합니다.Validation:tax_type이 FREE인데 tax_amount가 0이 아니면 에러.tax_type이 WITHHOLDING_3.3인데 tax_amount가 양수면 에러.Member 등급이 타인의 데이터를 수정하려 하면 403 Forbidden.3.3. 권한 요청 API (POST /api/access/request)사용자가 특정 프로젝트의 재무 탭 접근을 요청하면 access_requests 테이블에 PENDING 상태로 저장.해당 프로젝트의 PM이나 관리자에게 알림 발송.승인(APPROVED) 시, 조회 API에서 해당 유저를 예외 허용 리스트에 포함하여 데이터 리턴.4. 개발 진행 순서 (Roadmap)혼란을 줄이고 빠르게 핵심 기능을 띄우기 위한 최적의 순서입니다.[1단계: 기초 공사 & 마스터 데이터] (1주차)DB 구축: 위 SQL 스크립트 실행 (Supabase).Auth 설정: 회원가입 시 app_users에 자동 등록되는 Trigger 구현.마스터 관리자 페이지: 부서 코드, 거래처, 아티스트 등록 기능 구현. (데이터가 있어야 프로젝트 테스트 가능)[2단계: 프로젝트 & 업무 관리] (2~3주차)프로젝트 생성: 사업부별 동적 모달 구현.할 일(Task) 관리: 프로젝트 내 할 일 생성 및 담당자 지정 기능.참여자(Participant) 매핑: participants JSONB 저장 로직 구현.조회 필터링: "내 부서 + 내가 낀 프로젝트"만 보이는지 리스트 테스트.[3단계: 재무 및 정산 시스템] (4주차)Smart Calculator: 프론트엔드에서 과세/면세/3.3% 계산 로직 구현.재무 CRUD: 프로젝트와 연동하여 매출/지출 내역 저장.통계 대시보드: 프로젝트별 수익률(매출 - 지출) 그래프 표시.[4단계: 보안 및 권한 고도화] (5주차)RLS 적용: DB 레벨에서 Row 단위 보안 정책 적용.권한 요청 시스템: access_requests 승인/거절 UI 및 로직 구현.테스트: Member 아이디로 로그인하여 타 부서/타인 재무 정보가 안 보이는지 검증.